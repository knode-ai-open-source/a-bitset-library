## 08/22/2025

**Modernize A Memory Library: build system, docs, SPDX headers, tests**

## Summary

## ğŸ”¥ Removed

* **`.changes/` + `CHANGELOG.md` + `NEWS.md`**

    * All `Changie` config, header templates, and versioned changelogs deleted.
    * Initial release notes removed (`A Bitset Library 0.1.1`).

## ğŸ“ Updated

* **`.gitignore`**

    * Added ignores: `build-unix_makefiles`, `build-cov`, `build-coverage`.
* **`AUTHORS`**

    * Reformatted Andy Curtis entry:

        * Before: `Andy Curtis / contactandyc@gmail.com / linkedin.com/in/andycurtis`
        * After: `Andy Curtis <contactandyc@gmail.com> linkedin.com/in/andycurtis github.com/andycurtis-public/`
* **`NOTICE`**

    * Adjusted Knode.ai attribution:

        * Before: `Â© 2024-2025 Knode.ai â€” technical questions: contact Andy (above)`
        * After: `Â© 2024â€“2025 Knode.ai`
* **SPDX Headers**

    * All source and header files updated:

        * Use en-dash (`â€“`) instead of hyphen for year ranges.
        * Add clarifying note for Knode.ai: *â€œâ€” technical questions: contact Andy (above)â€*.

## ğŸ“– Documentation

* **`BUILDING.md`**

    * Now describes **A Bitset Library v0.0.1** (instead of generic dev-env).
    * Local build via `./build.sh install` or manual CMake.
    * Explicit dependency installation section (`a-memory-library`, dev tools).
    * Added **Dockerfile** instructions for Ubuntu base, CMake install, optional Python venv, and auto-building `a-memory-library`.
* **`README.md`**

    * Simplified drastically:

        * Before: Detailed API docs for `abitset_t` and `abitset_expandable_t`.
        * After: Minimal stub generated by **create-c-repo**:

          ```
          # A Bitset Library
          Generated with create-c-repo. Target: a_bitset_library.
          ## Build
          ./build.sh install
          ```

## âš™ï¸ Build System

* **`CMakeLists.txt`**

    * Migrated from legacy `3.10` + `LibraryConfig` macros â†’ modern CMake (3.20+).
    * Defines **project `a_bitset_library` v0.0.1**, C standard 17.
    * Introduces **multi-variant builds**:

        * `a_bitset_library_debug`
        * `a_bitset_library_memory` (with optional `_AML_DEBUG_` define)
        * `a_bitset_library_static`
        * `a_bitset_library_shared`
    * Adds umbrella alias: `a_bitset_library::a_bitset_library`.
    * Links against `a_memory_library`.
    * Installs headers, CMake config files, and export targets.
    * Adds `enable_testing()` and `tests/` subdir.
* **`Dockerfile`**

    * Replaced dev-env base with **Ubuntu 22.04** base.
    * Installs build essentials, dev tools, and CMake from official binaries.
    * Builds and installs `a-memory-library` before building bitset library.
    * Supports optional Python venv.
* **`build.sh`** (new)

    * Unified build script with commands:

        * `build` â†’ configure & build
        * `install` â†’ build + install (with sudo if needed)
        * `coverage` â†’ clean, build with coverage, run tests, generate report via `llvm-cov`
        * `clean` â†’ wipe build dirs
* **`build_install.sh`**

    * Deleted (old one-shot script).

## ğŸ§ª Tests

* **`tests/CMakeLists.txt`**

    * Completely rewritten to match memory library style.
    * Requires CMake 3.20+, defines variant selection + coverage.
    * Builds:

        * `test_bitset`
        * `test_bitset_expandable`
    * Links against `a_bitset_library::a_bitset_library`.
    * Adds coverage aggregation target using `llvm-cov`.
* **`tests/build.sh`** (new)

    * Flexible test build runner with variant + coverage flags.
* **`tests/src/test_bitset.c`**

    * Updated SPDX headers, `main()` signature â†’ `int main(void)`.
* **`tests/src/test_bitset_expandable.c`**

    * Updated SPDX headers, `main()` signature.
    * Includes `a-memory-library/aml_alloc.h`.

---

âœ… **Net effect**:
The bitset library has been modernized to the same style as the memory library:

* Unified build system with variants and coverage.
* Simplified docs + Dockerfile.
* Removed old changelogs and scripts.
* Updated SPDX and attribution.
* Tests restructured for coverage and consistency.
